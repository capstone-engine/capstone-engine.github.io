<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Capstone - 2.1</title><link rel="stylesheet" href="css/style.css" type="text/css" media="all"><link rel="stylesheet" href="css/pygments.css" type="text/css" media="all"><link rel="alternate" href="feed/index.xml" type="application/atom+xml" title="Atom Feed"></head><body><div id="fb-root"></div> <script>!function(e,t,n){var c,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(c=e.createElement(t),c.id=n,c.src="//connect.facebook.net/en_US/all.js#xfbml=1",o.parentNode.insertBefore(c,o))}(document,"script","facebook-jssdk")</script><script>!function(t,e,r){var n,s=t.getElementsByTagName(e)[0],i=/^http:/.test(t.location)?"http":"https";t.getElementById(r)||(n=t.createElement(e),n.id=r,n.src=i+"://platform.twitter.com/widgets.js",s.parentNode.insertBefore(n,s))}(document,"script","twitter-wjs")</script><script>!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><div class="page"> <header> <a href="index.html" id="cs_home">Capstone</a> <nav> <a href="index.html">Home</a> <a href="download.html">Download</a> <a href="documentation.html">Documentation</a> <a href="showcase.html">Showcase</a> <a href="testimonial.html">Testimonials</a> <a href="contact.html">Contact</a> </nav> </header> <section><h2>2.1</h2><span class="date"><div class="dateday"> 5</div><div>Mar</div><div class="dateyear">2014</div> </span><p><p>Release 2.1 brings a lot of important changes: see <a href="version_2.1_API.html">here</a> on how to modify 2.0-based code to work with 2.1 API.</p><p><br/></p><h4 id="api-changes">API changes:</h4><ul><li><p>API version has been bumped to 2.1.</p></li><li><p>Change prototype of <strong>cs_close()</strong> to be able to invalidate closed handle. See <a href="http://capstone-engine.org/version_2.1_API.html">http://capstone-engine.org/version_2.1_API.html</a> for more information.</p></li><li><p>Extend <strong>cs_support()</strong> to handle more query types, not only about supported architectures. This change is backward compatible, however, so existent code do not need to be modified to support this.</p></li><li><p>New query type <strong>CS_SUPPORT_DIET</strong> for <em>cs_support()</em> to ask about <em>diet</em> status of the engine.</p></li><li><p>New error code <strong>CS_ERR_DIET</strong> to report errors about newly added <em>diet</em> mode.</p></li><li><p>New error code <strong>CS_ERR_VERSION</strong> to report issue of incompatible versions between bindings &amp; core engine.</p></li></ul><p><br/></p><h4 id="core-changes">Core changes</h4><ul><li><p>On memory usage, Capstone uses about 40% less memory, while still faster than version 2.0.</p></li><li><p>All architectures are much smaller: binaries size reduce at least 30%. Especially, X86-only binary reduces from 1.9MB to just 720KB.</p></li><li><p>Support <strong>diet</strong> mode, in which engine size is further reduced (by around 40%) for embedding purpose. The price to pay is that we have to sacrifice some non-critical data fields. See <a href="http://capstone-engine.org/diet.html">http://capstone-engine.org/diet.html</a> for more details.</p></li></ul><p><br/></p><h4 id="architectures">Architectures</h4><ul><li><p>Update all 5 architectures to fix bugs.</p></li><li><p>PowerPC:</p><ul><li>New instructions: <em>FMR</em> &amp; <em>MSYNC</em>.</li></ul></li><li><p>Mips:</p><ul><li>New instruction: <em>DLSA</em></li></ul></li><li><p>X86:</p><ul><li><p>Properly handle <em>AVX-512</em> instructions.</p></li><li><p>New instructions: <em>PSETPM</em>, <em>SALC</em>, <em>INT1</em>, <em>GETSEC</em>.</p></li><li><p>Fix some memory leaking issues in case of prefixed instructions such as <em>LOCK</em>, <em>REP</em>, <em>REPNE</em>.</p></li></ul></li></ul><p><br/></p><h4 id="python-binding">Python binding</h4><ul><li><p>Verify the core version at initialization time. Refuse to run if its version is different from the core’s version.</p></li><li><p>New API <strong>disasm_lite()</strong> added to Cs class. This light API only returns tuples of (address, size, mnemonic, op_str), rather than list of <em>CsInsn</em> objects. This improves performance by around 30% in some benchmarks.</p></li><li><p>New API <strong>version_bind()</strong> returns binding’s version, which might differ from the core’s API version if binding is out-of-date.</p></li><li><p>New API <strong>debug()</strong> returns information on Cython support, diet status, archs compiled in &amp; versions of core &amp; binding.</p></li><li><p>Fixed some memory leaking bugs for <em>Cython</em> binding.</p></li><li><p>Fix a bug crashing Cython code when accessing <em>@regs_read/regs_write/groups</em>.</p></li><li><p>Support <em>diet</em> mode.</p></li></ul><p><br/></p><h4 id="java-binding">Java binding</h4><ul><li><p>Fix some memory leaking bugs.</p></li><li><p>New API <strong>version()</strong> returns combined API version.</p></li><li><p>Support <em>diet</em> mode.</p></li><li><p>Better support for detail option.</p></li></ul><p><br/></p><h4 id="miscellaneous">Miscellaneous</h4><ul><li><em>make.sh</em> now can uninstall the core engine. This is done with:</li></ul><div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>sudo ./make.sh uninstall</code></pre></div></p></section> <footer> <a href="http://www.coseinc.com">Sponsored by COSEINC</a> </footer></div></body></html>